<form method="post" class="form-x admin-form form-auto" id="form">
    <div class="tab admin-tab">
        <div class="panel admin-box active">
            <div class="panel-head">
                <div class="tab-head">
                    <strong>分组授权</strong>
                    <ul class="tab-nav">
                        <li class="active"><a href="#tab-1">授权详情</a></li>
                    </ul>
                </div>
            </div>
            <div class="tab-body">
                <div class="tab-panel active" id="tab-1">
                	{foreach $purviewvList as $ckey=>$list}
                    <div class="form-group">
                    	<div class="label"><label>{$list.name}</label></div>
                        <div class="field">
							<div class="button-group checkbox">
                            	<div class="action">
                            	{foreach $list.list as $akey=>$authList}
                                    <span class="button data-{$authList.type} labelbutton" data-type="{$authList.type}">
                                        <input name="grouppurview[]" value="{$ckey}_{$akey}" type="checkbox"> {$authList.name}
                                    </span>
                                {/foreach}
                            	</div>
                            </div>
                        </div>
                    </div>
                    {/foreach}
                </div>
            </div>
            <div class="panel-foot">
                <div class="form-button">
                    <div id="tips"></div>
                    <button class="button bg-main" type="submit">保存</button>
                    <button class="button bg" type="reset">重置</button>
                </div>
            </div>
        </div>
    </div>
</form>
<script>
    Do.ready('base', function () {
        //表单综合处理
        $('#form').FormPage();
		var groupurview = '{$grouppurview}';
		if(groupurview != ''){
			if(groupurview == 'all'){
				$(".form-group .data-all").trigger("click");
			}else{
				groupurview = JSON.parse(groupurview);
				$.each(groupurview,function(i,item){
					$(".form-group").find("input[value='"+item+"']").trigger("click");
				});				
			}
		}
    }); 
</script>